!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(E,M){function x(){return new Date(Date.UTC.apply(Date,arguments))}function b(){var e=new Date;return x(e.getFullYear(),e.getMonth(),e.getDate())}function n(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function e(e,t){return function(){return t!==M&&E.fn.datepicker.deprecated(t),this[e].apply(this,arguments)}}var t,i=(t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),i=0,s=this.length;i<s;i++)if(0<=this[i].valueOf()-t&&this[i].valueOf()-t<864e5)return i;return-1},remove:function(e){this.splice(e,1)},replace:function(e){e&&(E.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var e=new i;return e.replace(this),e}},function(){var e=[];return e.push.apply(e,arguments),E.extend(e,t),e}),k=function(e,t){E.data(e,"datepicker",this),this._process_options(t),this.dates=new i,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=E(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=E(O.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return Number(t)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};k.prototype={constructor:k,_resolveViewName:function(i){return E.each(O.viewModes,function(e,t){if(i===e||-1!==E.inArray(i,t.names))return i=e,!1}),i},_resolveDaysOfWeek:function(e){return E.isArray(e)||(e=e.split(/[,\s]*/)),E.map(e,Number)},_check_template:function(e){try{return e!==M&&""!==e&&((e.match(/[<>]/g)||[]).length<=0||0<E(e).length)}catch(e){return!1}},_process_options:function(e){this._o=E.extend({},this._o,e);var t=this.o=E.extend({},this._o),i=t.language;U[i]||(i=i.split("-")[0],U[i]||(i=d.language)),t.language=i,t.startView=this._resolveViewName(t.startView),t.minViewMode=this._resolveViewName(t.minViewMode),t.maxViewMode=this._resolveViewName(t.maxViewMode),t.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,t.startView)),!0!==t.multidate&&(t.multidate=Number(t.multidate)||!1,!1!==t.multidate&&(t.multidate=Math.max(0,t.multidate))),t.multidateSeparator=String(t.multidateSeparator),t.weekStart%=7,t.weekEnd=(t.weekStart+6)%7;var s=O.parseFormat(t.format);t.startDate!==-1/0&&(t.startDate?t.startDate instanceof Date?t.startDate=this._local_to_utc(this._zero_time(t.startDate)):t.startDate=O.parseDate(t.startDate,s,t.language,t.assumeNearbyYear):t.startDate=-1/0),t.endDate!==1/0&&(t.endDate?t.endDate instanceof Date?t.endDate=this._local_to_utc(this._zero_time(t.endDate)):t.endDate=O.parseDate(t.endDate,s,t.language,t.assumeNearbyYear):t.endDate=1/0),t.daysOfWeekDisabled=this._resolveDaysOfWeek(t.daysOfWeekDisabled||[]),t.daysOfWeekHighlighted=this._resolveDaysOfWeek(t.daysOfWeekHighlighted||[]),t.datesDisabled=t.datesDisabled||[],E.isArray(t.datesDisabled)||(t.datesDisabled=t.datesDisabled.split(",")),t.datesDisabled=E.map(t.datesDisabled,function(e){return O.parseDate(e,s,t.language,t.assumeNearbyYear)});var a=String(t.orientation).toLowerCase().split(/\s+/g),n=t.orientation.toLowerCase();if(a=E.grep(a,function(e){return/^auto|left|right|top|bottom$/.test(e)}),t.orientation={x:"auto",y:"auto"},n&&"auto"!==n)if(1===a.length)switch(a[0]){case"top":case"bottom":t.orientation.y=a[0];break;case"left":case"right":t.orientation.x=a[0]}else n=E.grep(a,function(e){return/^left|right$/.test(e)}),t.orientation.x=n[0]||"auto",n=E.grep(a,function(e){return/^top|bottom$/.test(e)}),t.orientation.y=n[0]||"auto";if(t.defaultViewDate instanceof Date||"string"==typeof t.defaultViewDate)t.defaultViewDate=O.parseDate(t.defaultViewDate,s,t.language,t.assumeNearbyYear);else if(t.defaultViewDate){var o=t.defaultViewDate.year||(new Date).getFullYear(),r=t.defaultViewDate.month||0,h=t.defaultViewDate.day||1;t.defaultViewDate=x(o,r,h)}else t.defaultViewDate=b()},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t,i,s,a=0;a<e.length;a++)t=e[a][0],2===e[a].length?(i=M,s=e[a][1]):3===e[a].length&&(i=e[a][1],s=e[a][2]),t.on(s,i)},_unapplyEvents:function(e){for(var t,i,s,a=0;a<e.length;a++)t=e[a][0],2===e[a].length?(s=M,i=e[a][1]):3===e[a].length&&(s=e[a][1],i=e[a][2]),t.off(i,s)},_buildEvents:function(){var e={keyup:E.proxy(function(e){-1===E.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:E.proxy(this.keydown,this),paste:E.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=E.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.inputField.length?this._events=[[this.inputField,e],[this.component,{click:E.proxy(this.show,this)}]]:this._events=[[this.element,{click:E.proxy(this.show,this),keydown:E.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:E.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:E.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":E.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:E.proxy(this.click,this)}],[this.picker,".prev, .next",{click:E.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:E.proxy(this.dayCellClick,this)}],[E(window),{resize:E.proxy(this.place,this)}],[E(document),{"mousedown touchstart":E.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,t){var i=t||this.dates.get(-1),s=this._utc_to_local(i);this.element.trigger({type:e,date:s,viewMode:this.viewMode,dates:E.map(this.dates,this._utc_to_local),format:E.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var i=this.dates.get(e);return O.formatDate(i,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&E(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")||(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide")),this},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var t;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==E.inArray("text/plain",e.originalEvent.clipboardData.types))t=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;t=window.clipboardData.getData("Text")}this.setDate(t),this.update(),e.preventDefault()},_utc_to_local:function(e){if(!e)return e;var t=new Date(e.getTime()+6e4*e.getTimezoneOffset());return t.getTimezoneOffset()!==e.getTimezoneOffset()&&(t=new Date(e.getTime()+6e4*t.getTimezoneOffset())),t},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&x(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},getDates:function(){return E.map(this.dates,this._utc_to_local)},getUTCDates:function(){return E.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return e!==M?new Date(e):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=E.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=E.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,E.map(e,this._utc_to_local)),this},setDate:e("setDates"),setUTCDate:e("setUTCDates"),remove:e("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(t){t===M&&(t=this.o.format);var i=this.o.language;return E.map(this.dates,function(e){return O.formatDate(e,t,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){return this._process_options({datesDisabled:e}),this.update(),this},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),t=this.picker.outerHeight(),i=E(this.o.container),s=i.width(),a="body"===this.o.container?E(document).scrollTop():i.scrollTop(),n=i.offset(),o=[0];this.element.parents().each(function(){var e=E(this).css("z-index");"auto"!==e&&0!==Number(e)&&o.push(Number(e))});var r=Math.max.apply(Math,o)+this.o.zIndexOffset,h=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),c=h.left-n.left,u=h.top-n.top;"body"!==this.o.container&&(u+=a),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(c-=e-d)):h.left<0?(this.picker.addClass("datepicker-orient-left"),c-=h.left-10):s<c+e?(this.picker.addClass("datepicker-orient-right"),c+=d-e):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var p=this.o.orientation.y;if("auto"===p&&(p=-a+u-t<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+p),"top"===p?u-=t+parseInt(this.picker.css("padding-top")):u+=l,this.o.rtl){var f=s-(c+d);this.picker.css({top:u,right:f,zIndex:r})}else this.picker.css({top:u,left:c,zIndex:r});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),i=[],t=!1;return arguments.length?(E.each(arguments,E.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),i.push(t)},this)),t=!0):(i=(i=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=E.map(i,E.proxy(function(e){return O.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),i=E.grep(i,E.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(i),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),t?(this.setValue(),this.element.change()):this.dates.length&&String(e)!==String(this.dates)&&t&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&e.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var e=this.o.weekStart,t="<tr>";for(this.o.calendarWeeks&&(t+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)t+='<th class="dow',-1!==E.inArray(e,this.o.daysOfWeekDisabled)&&(t+=" disabled"),t+='">'+U[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)}},fillMonths:function(){for(var e=this._utc_to_local(this.viewDate),t="",i=0;i<12;i++)t+='<span class="month'+(e&&e.getMonth()===i?" focused":"")+'">'+U[this.o.language].monthsShort[i]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=E.map(e,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var t=[],i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),a=b();return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<s?t.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>s)&&t.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&t.push("focused"),this.o.todayHighlight&&n(e,a)&&t.push("today"),-1!==this.dates.contains(e)&&t.push("active"),this.dateWithinRange(e)||t.push("disabled"),this.dateIsDisabled(e)&&t.push("disabled","disabled-date"),-1!==E.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&t.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&t.push("range"),-1!==E.inArray(e.valueOf(),this.range)&&t.push("selected"),e.valueOf()===this.range[0]&&t.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&t.push("range-end")),t},_fill_yearsView:function(e,t,i,s,a,n,o){for(var r,h,l,d="",c=i/10,u=this.picker.find(e),p=Math.floor(s/i)*i,f=p+9*c,g=Math.floor(this.viewDate.getFullYear()/c)*c,m=E.map(this.dates,function(e){return Math.floor(e.getUTCFullYear()/c)*c}),v=p-c;v<=f+c;v+=c)r=[t],h=null,v===p-c?r.push("old"):v===f+c&&r.push("new"),-1!==E.inArray(v,m)&&r.push("active"),(v<a||n<v)&&r.push("disabled"),v===g&&r.push("focused"),o!==E.noop&&((l=o(new Date(v,0,1)))===M?l={}:"boolean"==typeof l?l={enabled:l}:"string"==typeof l&&(l={classes:l}),!1===l.enabled&&r.push("disabled"),l.classes&&(r=r.concat(l.classes.split(/\s+/))),l.tooltip&&(h=l.tooltip)),d+='<span class="'+r.join(" ")+'"'+(h?' title="'+h+'"':"")+">"+v+"</span>";u.find(".datepicker-switch").text(p+"-"+f),u.find("td").html(d)},fill:function(){var e,t,i=new Date(this.viewDate),a=i.getUTCFullYear(),s=i.getUTCMonth(),n=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,o=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,r=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=U[this.o.language].today||U.en.today||"",d=U[this.o.language].clear||U.en.clear||"",c=U[this.o.language].titleFormat||U.en.titleFormat;if(!isNaN(a)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(O.formatDate(i,c,this.o.language)),this.picker.find("tfoot .today").text(l).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(d).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var u=x(a,s,0),p=u.getUTCDate();u.setUTCDate(p-(u.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(u);u.getUTCFullYear()<100&&f.setUTCFullYear(u.getUTCFullYear()),f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var g,m,v=[];u.valueOf()<f;){if((g=u.getUTCDay())===this.o.weekStart&&(v.push("<tr>"),this.o.calendarWeeks)){var y=new Date(+u+(this.o.weekStart-g-7)%7*864e5),w=new Date(Number(y)+(11-y.getUTCDay())%7*864e5),D=new Date(Number(D=x(w.getUTCFullYear(),0,1))+(11-D.getUTCDay())%7*864e5),b=(w-D)/864e5/7+1;v.push('<td class="cw">'+b+"</td>")}(m=this.getClassNames(u)).push("day");var k=u.getUTCDate();this.o.beforeShowDay!==E.noop&&((t=this.o.beforeShowDay(this._utc_to_local(u)))===M?t={}:"boolean"==typeof t?t={enabled:t}:"string"==typeof t&&(t={classes:t}),!1===t.enabled&&m.push("disabled"),t.classes&&(m=m.concat(t.classes.split(/\s+/))),t.tooltip&&(e=t.tooltip),t.content&&(k=t.content)),m=E.isFunction(E.uniqueSort)?E.uniqueSort(m):E.unique(m),v.push('<td class="'+m.join(" ")+'"'+(e?' title="'+e+'"':"")+' data-date="'+u.getTime().toString()+'">'+k+"</td>"),e=null,g===this.o.weekEnd&&v.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(v.join(""));var C=U[this.o.language].monthsTitle||U.en.monthsTitle||"Months",_=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?C:a).end().find("tbody span").removeClass("active");if(E.each(this.dates,function(e,t){t.getUTCFullYear()===a&&_.eq(t.getUTCMonth()).addClass("active")}),(a<n||r<a)&&_.addClass("disabled"),a===n&&_.slice(0,o).addClass("disabled"),a===r&&_.slice(h+1).addClass("disabled"),this.o.beforeShowMonth!==E.noop){var T=this;E.each(_,function(e,t){var i=new Date(a,e,1),s=T.o.beforeShowMonth(i);s===M?s={}:"boolean"==typeof s?s={enabled:s}:"string"==typeof s&&(s={classes:s}),!1!==s.enabled||E(t).hasClass("disabled")||E(t).addClass("disabled"),s.classes&&E(t).addClass(s.classes),s.tooltip&&E(t).prop("title",s.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,a,n,r,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,a,n,r,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,a,n,r,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e,t,i=new Date(this.viewDate),s=i.getUTCFullYear(),a=i.getUTCMonth(),n=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,o=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,r=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=1;switch(this.viewMode){case 0:e=s<=n&&a<=o,t=r<=s&&h<=a;break;case 4:l*=10;case 3:l*=10;case 2:l*=10;case 1:e=Math.floor(s/l)*l<=n,t=Math.floor(s/l)*l+l>=r}this.picker.find(".prev").toggleClass("disabled",e),this.picker.find(".next").toggleClass("disabled",t)}},click:function(e){var t,i,s;e.preventDefault(),e.stopPropagation(),(t=E(e.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),t.hasClass("today")&&!t.hasClass("day")&&(this.setViewMode(0),this._setDate(b(),"linked"===this.o.todayBtn?null:"view")),t.hasClass("clear")&&this.clearDates(),t.hasClass("disabled")||(t.hasClass("month")||t.hasClass("year")||t.hasClass("decade")||t.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(s=t.parent().find("span").index(t),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s)):(s=0,i=Number(t.text()),this.viewDate.setUTCFullYear(i)),this._trigger(O.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(x(i,s,1)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var t=E(e.currentTarget).data("date"),i=new Date(t);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(i)},navArrowsClick:function(e){var t=E(e.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(t*=12*O.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,t),this._trigger(O.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(t):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(e)),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),(!t&&this.o.updateViewDate||"view"===t)&&(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var i=new Date(e);return i.setUTCDate(e.getUTCDate()+t),i},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!(i=e)||isNaN(i.getTime()))return this.o.defaultViewDate;var i;if(!t)return e;var s,a,n=new Date(e.valueOf()),o=n.getUTCDate(),r=n.getUTCMonth(),h=Math.abs(t);if(t=0<t?1:-1,1===h)a=-1===t?function(){return n.getUTCMonth()===r}:function(){return n.getUTCMonth()!==s},s=r+t,n.setUTCMonth(s),s=(s+12)%12;else{for(var l=0;l<h;l++)n=this.moveMonth(n,t);s=n.getUTCMonth(),n.setUTCDate(o),a=function(){return s!==n.getUTCMonth()}}for(;a();)n.setUTCDate(--o),n.setUTCMonth(s);return n},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,i){do{if(e=this[i](e,t),!this.dateWithinRange(e))return!1;i="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(e){return-1!==E.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||0<E.grep(this.o.datesDisabled,function(e){return n(t,e)}).length},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":visible")){var t,i,s=!1,a=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(i=this.moveAvailableDate(a,t,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(i=this.moveAvailableDate(a,t,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?i=this.moveAvailableDate(a,t,"moveDay"):this.weekOfDateIsDisabled(a)||(i=this.moveAvailableDate(a,t,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(a,t,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(a,t,"moveYear")),i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;a=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(a),s=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}s&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation())},setViewMode:function(e){this.viewMode=e,this.picker.children("div").hide().filter(".datepicker-"+O.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var l=function(e,t){E.data(e,"datepicker",this),this.element=E(e),this.inputs=E.map(t.inputs,function(e){return e.jquery?e[0]:e}),delete t.inputs,this.keepEmptyValues=t.keepEmptyValues,delete t.keepEmptyValues,a.call(E(this.inputs),t).on("changeDate",E.proxy(this.dateUpdated,this)),this.pickers=E.map(this.inputs,function(e){return E.data(e,"datepicker")}),this.updateDates()};l.prototype={updateDates:function(){this.dates=E.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var i=E.map(this.dates,function(e){return e.valueOf()});E.each(this.pickers,function(e,t){t.setRange(i)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=E.data(e.target,"datepicker");if(i!==M){var s=i.getUTCDate(),a=this.keepEmptyValues,t=E.inArray(e.target,this.inputs),n=t-1,o=t+1,r=this.inputs.length;if(-1!==t){if(E.each(this.pickers,function(e,t){t.getUTCDate()||t!==i&&a||t.setUTCDate(s)}),s<this.dates[n])for(;0<=n&&s<this.dates[n];)this.pickers[n--].setUTCDate(s);else if(s>this.dates[o])for(;o<r&&s>this.dates[o];)this.pickers[o++].setUTCDate(s);this.updateDates(),delete this.updating}}}},destroy:function(){E.map(this.pickers,function(e){e.destroy()}),E(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:e("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var s=E.fn.datepicker,a=function(o){var r,h=Array.apply(null,arguments);if(h.shift(),this.each(function(){var e=E(this),t=e.data("datepicker"),i="object"==typeof o&&o;if(!t){var s=function(e,t){function i(e,t){return t.toLowerCase()}var s=E(e).data(),a={},n=new RegExp("^"+t.toLowerCase()+"([A-Z])");for(var o in t=new RegExp("^"+t.toLowerCase()),s)t.test(o)&&(a[o.replace(n,i)]=s[o]);return a}(this,"date"),a=function(e){var i={};if(U[e]||(e=e.split("-")[0],U[e])){var s=U[e];return E.each(c,function(e,t){t in s&&(i[t]=s[t])}),i}}(E.extend({},d,s,i).language),n=E.extend({},d,a,s,i);t=e.hasClass("input-daterange")||n.inputs?(E.extend(n,{inputs:n.inputs||e.find("input").toArray()}),new l(this,n)):new k(this,n),e.data("datepicker",t)}"string"==typeof o&&"function"==typeof t[o]&&(r=t[o].apply(t,h))}),r===M||r instanceof k||r instanceof l)return this;if(1<this.length)throw new Error("Using only allowed for the collection of a single element ("+o+" function)");return r};E.fn.datepicker=a;var d=E.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:E.noop,beforeShowMonth:E.noop,beforeShowYear:E.noop,beforeShowDecade:E.noop,beforeShowCentury:E.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},c=E.fn.datepicker.locale_opts=["format","rtl","weekStart"];E.fn.datepicker.Constructor=k;var U=E.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},O={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,t,i,a){function s(){var e=this.slice(0,n[h].length),t=n[h].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!e)return M;if(e instanceof Date)return e;if("string"==typeof t&&(t=O.parseFormat(t)),t.toValue)return t.toValue(e,t,i);var n,o,r,h,l,d={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},c={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(e in c&&(e=c[e]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(e)){for(n=e.match(/([\-+]\d+)([dmwy])/gi),e=new Date,h=0;h<n.length;h++)o=n[h].match(/([\-+]\d+)([dmwy])/i),r=Number(o[1]),l=d[o[2].toLowerCase()],e=k.prototype[l](e,r);return k.prototype._zero_utc_time(e)}n=e&&e.match(this.nonpunctuation)||[];var u,p,f={},g=["yyyy","yy","M","MM","m","mm","d","dd"],m={yyyy:function(e,t){return e.setUTCFullYear(a?(!0===(s=a)&&(s=10),(i=t)<100&&(i+=2e3)>(new Date).getFullYear()+s&&(i-=100),i):t);var i,s},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};m.yy=m.yyyy,m.M=m.MM=m.mm=m.m,m.dd=m.d,e=b();var v=t.parts.slice();if(n.length!==v.length&&(v=E(v).filter(function(e,t){return-1!==E.inArray(t,g)}).toArray()),n.length===v.length){var y,w,D;for(h=0,y=v.length;h<y;h++){if(u=parseInt(n[h],10),o=v[h],isNaN(u))switch(o){case"MM":p=E(U[i].months).filter(s),u=E.inArray(p[0],U[i].months)+1;break;case"M":p=E(U[i].monthsShort).filter(s),u=E.inArray(p[0],U[i].monthsShort)+1}f[o]=u}for(h=0;h<g.length;h++)(D=g[h])in f&&!isNaN(f[D])&&(w=new Date(e),m[D](w,f[D]),isNaN(w)||(e=w))}return e},formatDate:function(e,t,i){if(!e)return"";if("string"==typeof t&&(t=O.parseFormat(t)),t.toDisplay)return t.toDisplay(e,t,i);var s={d:e.getUTCDate(),D:U[i].daysShort[e.getUTCDay()],DD:U[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:U[i].monthsShort[e.getUTCMonth()],MM:U[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m,e=[];for(var a=E.extend([],t.separators),n=0,o=t.parts.length;n<=o;n++)a.length&&e.push(a.shift()),e.push(s[t.parts[n]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+d.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+d.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};O.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+O.headTemplate+"<tbody></tbody>"+O.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+O.headTemplate+O.contTemplate+O.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+O.headTemplate+O.contTemplate+O.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+O.headTemplate+O.contTemplate+O.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+O.headTemplate+O.contTemplate+O.footTemplate+"</table></div></div>",E.fn.datepicker.DPGlobal=O,E.fn.datepicker.noConflict=function(){return E.fn.datepicker=s,this},E.fn.datepicker.version="1.7.1",E.fn.datepicker.deprecated=function(e){var t=window.console;t&&t.warn&&t.warn("DEPRECATED: "+e)},E(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var t=E(this);t.data("datepicker")||(e.preventDefault(),a.call(t,"show"))}),E(function(){a.call(E('[data-provide="datepicker-inline"]'))})}),function(a,e,t,i){function n(e,t){this.element=a(e),this.settings=a.extend({},y,t),this._defaults=y,this._name=l,this.init()}function s(e){v&&(e.element.addClass("navbar-hidden").animate({top:-1*parseInt(e.element.css("height"),10)+e.settings.navbarOffset},{queue:!1,duration:e.settings.animationDuration}),a(".dropdown.open .dropdown-toggle",e.element).dropdown("toggle"),v=!1)}function o(e){v||(e.element.removeClass("navbar-hidden").animate({top:0},{queue:!1,duration:e.settings.animationDuration}),v=!0)}function r(e){e.settings.disableAutohide||(f=(new Date).getTime(),function(e){var t=d.scrollTop(),i=t-g;if(g=t,i<0){if(v)return;(e.settings.showOnUpscroll||t<=h)&&o(e)}else if(0<i){if(!v)return e.settings.showOnBottom&&t+m===c.height()&&o(e);h<=t&&s(e)}}(e))}var h,l="autoHidingNavbar",d=a(e),c=a(t),u=null,p=null,f=0,g=null,m=d.height(),v=!0,y={disableAutohide:!1,showOnUpscroll:!0,showOnBottom:!0,hideOffset:"auto",animationDuration:200,navbarOffset:0};n.prototype={init:function(){return this.elements={navbar:this.element},this.setDisableAutohide(this.settings.disableAutohide),this.setShowOnUpscroll(this.settings.showOnUpscroll),this.setShowOnBottom(this.settings.showOnBottom),this.setHideOffset(this.settings.hideOffset),this.setAnimationDuration(this.settings.animationDuration),h="auto"===this.settings.hideOffset?parseInt(this.element.css("height"),10):this.settings.hideOffset,e=this,c.on("scroll."+l,function(){70<(new Date).getTime()-f?r(e):(clearTimeout(u),u=setTimeout(function(){r(e)},70))}),d.on("resize."+l,function(){clearTimeout(p),p=setTimeout(function(){m=d.height()},70)}),this.element;var e},setDisableAutohide:function(e){return this.settings.disableAutohide=e,this.element},setShowOnUpscroll:function(e){return this.settings.showOnUpscroll=e,this.element},setShowOnBottom:function(e){return this.settings.showOnBottom=e,this.element},setHideOffset:function(e){return this.settings.hideOffset=e,this.element},setAnimationDuration:function(e){return this.settings.animationDuration=e,this.element},show:function(){return o(this),this.element},hide:function(){return s(this),this.element},destroy:function(){return c.off("."+l),d.off("."+l),o(this),a.data(this,"plugin_"+l,null),this.element}},a.fn[l]=function(t){var i,s=arguments;return void 0===t||"object"==typeof t?this.each(function(){a.data(this,"plugin_"+l)||a.data(this,"plugin_"+l,new n(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?(this.each(function(){var e=a.data(this,"plugin_"+l);e instanceof n&&"function"==typeof e[t]&&(i=e[t].apply(e,Array.prototype.slice.call(s,1)))}),void 0!==i?i:this):void 0}}(jQuery,window,document),function(d){"use strict";function a(e,t){if(!(this instanceof a)){var i=new a(e,t);return i.open(),i}this.id=a.id++,this.setup(e,t),this.chainCallbacks(a._callbackChain)}if(void 0!==d){var s=[],n=function(t){return s=d.grep(s,function(e){return e!==t&&0<e.$instance.closest("body").length})},o={allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,name:1,referrerpolicy:1,scrolling:1,sandbox:1,src:1,srcdoc:1,width:1},i={keyup:"onKeyUp",resize:"onResize"},r=function(e){d.each(a.opened().reverse(),function(){return e.isDefaultPrevented()||!1!==this[i[e.type]](e)?void 0:(e.preventDefault(),e.stopPropagation(),!1)})},h=function(e){if(e!==a._globalHandlerInstalled){a._globalHandlerInstalled=e;var t=d.map(i,function(e,t){return t+"."+a.prototype.namespace}).join(" ");d(window)[e?"on":"off"](t,r)}};a.prototype={constructor:a,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:d.noop,beforeContent:d.noop,beforeClose:d.noop,afterOpen:d.noop,afterContent:d.noop,afterClose:d.noop,onKeyUp:d.noop,onResize:d.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(e,t){"object"!=typeof e||e instanceof d!=0||t||(t=e,e=void 0);var i=d.extend(this,t,{target:e}),s=i.resetCss?i.namespace+"-reset":i.namespace,a=d(i.background||['<div class="'+s+"-loading "+s+'">','<div class="'+s+'-content">','<button class="'+s+"-close-icon "+i.namespace+'-close" aria-label="Close">',i.closeIcon,"</button>",'<div class="'+i.namespace+'-inner">'+i.loading+"</div>","</div>","</div>"].join("")),n="."+i.namespace+"-close"+(i.otherClose?","+i.otherClose:"");return i.$instance=a.clone().addClass(i.variant),i.$instance.on(i.closeTrigger+"."+i.namespace,function(e){var t=d(e.target);("background"===i.closeOnClick&&t.is("."+i.namespace)||"anywhere"===i.closeOnClick||t.closest(n).length)&&(i.close(e),e.preventDefault())}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;var t=this,e=this.constructor.contentFilters,i=function(e){return t.$currentTarget&&t.$currentTarget.attr(e)},s=i(t.targetAttr),a=t.target||s||"",n=e[t.type];if(!n&&a in e&&(n=e[a],a=t.target&&s),a=a||i("href")||"",!n)for(var o in e)t[o]&&(n=e[o],a=t[o]);if(!n){var r=a;if(a=null,d.each(t.contentFilters,function(){return(n=e[this]).test&&(a=n.test(r)),!a&&n.regex&&r.match&&r.match(n.regex)&&(a=r),!a}),!a)return"console"in window&&window.console.error("Featherlight: no content filter found "+(r?' for "'+r+'"':" (no target specified)")),!1}return n.process.call(t,a)},setContent:function(e){var t=this;return e.is("iframe")&&t.$instance.addClass(t.namespace+"-iframe"),t.$instance.removeClass(t.namespace+"-loading"),t.$instance.find("."+t.namespace+"-inner").not(e).slice(1).remove().end().replaceWith(d.contains(t.$instance[0],e[0])?"":e),t.$content=e.addClass(t.namespace+"-inner"),t},open:function(t){var i=this;if(i.$instance.hide().appendTo(i.root),!(t&&t.isDefaultPrevented()||!1===i.beforeOpen(t))){t&&t.preventDefault();var e=i.getContent();if(e)return s.push(i),h(!0),i.$instance.fadeIn(i.openSpeed),i.beforeContent(t),d.when(e).always(function(e){i.setContent(e),i.afterContent(t)}).then(i.$instance.promise()).done(function(){i.afterOpen(t)})}return i.$instance.detach(),d.Deferred().reject().promise()},close:function(e){var t=this,i=d.Deferred();return!1===t.beforeClose(e)?i.reject():(0===n(t).length&&h(!1),t.$instance.fadeOut(t.closeSpeed,function(){t.$instance.detach(),t.afterClose(e),i.resolve()})),i.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var i=Math.max(e/(this.$content.parent().width()-1),t/(this.$content.parent().height()-1));1<i&&(i=t/Math.floor(t/i),this.$content.css("width",e/i+"px").css("height",t/i+"px"))}},chainCallbacks:function(e){for(var t in e)this[t]=d.proxy(e[t],this,d.proxy(this[t],this))}},d.extend(a,{id:0,autoBind:"[data-featherlight]",defaults:a.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(e){return e instanceof d&&e},process:function(e){return!1!==this.persist?d(e):d(e).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(e){var t=d.Deferred(),i=new Image,s=d('<img src="'+e+'" alt="" class="'+this.namespace+'-image" />');return i.onload=function(){s.naturalWidth=i.width,s.naturalHeight=i.height,t.resolve(s)},i.onerror=function(){t.reject(s)},i.src=e,t.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(e){return d(e)}},ajax:{regex:/./,process:function(e){var i=d.Deferred(),s=d("<div></div>").load(e,function(e,t){"error"!==t&&i.resolve(s.contents()),i.fail()});return i.promise()}},iframe:{process:function(e){var t=new d.Deferred,i=d("<iframe/>"),s=function(e,t){var i={},s=new RegExp("^"+t+"([A-Z])(.*)");for(var a in e){var n=a.match(s);n&&(i[(n[1]+n[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[a])}return i}(this,"iframe"),a=function(e,t){var i={};for(var s in e)s in t&&(i[s]=e[s],delete e[s]);return i}(s,o);return i.hide().attr("src",e).attr(a).css(s).on("load",function(){t.resolve(i.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),t.promise()}},text:{process:function(e){return d("<div>",{text:e})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(e,t){var s=this,a=new RegExp("^data-"+t+"-(.*)"),n={};return e&&e.attributes&&d.each(e.attributes,function(){var e=this.name.match(a);if(e){var t=this.value,i=d.camelCase(e[1]);if(0<=d.inArray(i,s.functionAttributes))t=new Function(t);else try{t=JSON.parse(t)}catch(e){}n[i]=t}}),n},extend:function(e,t){var i=function(){this.constructor=e};return i.prototype=this.prototype,e.prototype=new i,e.__super__=this.prototype,d.extend(e,this,t),e.defaults=e.prototype,e},attach:function(a,n,o){var r=this;"object"!=typeof n||n instanceof d!=0||o||(o=n,n=void 0);var h,e=(o=d.extend({},o)).namespace||r.defaults.namespace,l=d.extend({},r.defaults,r.readElementConfig(a[0],e),o),t=function(e){var t=d(e.currentTarget),i=d.extend({$source:a,$currentTarget:t},r.readElementConfig(a[0],l.namespace),r.readElementConfig(e.currentTarget,l.namespace),o),s=h||t.data("featherlight-persisted")||new r(n,i);"shared"===s.persist?h=s:!1!==s.persist&&t.data("featherlight-persisted",s),i.$currentTarget.blur&&i.$currentTarget.blur(),s.open(e)};return a.on(l.openTrigger+"."+l.namespace,l.filter,t),t},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return n(),d.grep(s,function(e){return e instanceof t})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var t=this;t.autoBind&&(d(t.autoBind).each(function(){t.attach(d(this))}),d(document).on("click",t.autoBind,function(e){e.isDefaultPrevented()||t.attach(d(e.currentTarget))(e)}))},_callbackChain:{onKeyUp:function(e,t){return 27===t.keyCode?(this.closeOnEsc&&d.featherlight.close(t),!1):e(t)},beforeOpen:function(e,t){return d(document.documentElement).addClass("with-featherlight"),this._previouslyActive=document.activeElement,this._$previouslyTabbable=d("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=d("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(e,t){return d(t).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),document.activeElement.blur&&document.activeElement.blur(),e(t)},afterClose:function(e,t){var i=e(t),s=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(e,t){d(t).attr("tabindex",s._previousWithTabIndices[e])}),this._previouslyActive.focus(),0===a.opened().length&&d(document.documentElement).removeClass("with-featherlight"),i},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var i=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),i}}}),d.featherlight=a,d.fn.featherlight=function(e,t){return a.attach(this,e,t),this},d(document).ready(function(){a._onReady()})}else"console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery.")}(jQuery),function(o){function s(e,t){this.previewElement=e,this.options=t,this.animationLoaded=!1}s.scopes=new Array,s.prototype={supportedFormats:["gif","jpeg","jpg","png"],activate:function(){var e=this;0===this.previewElement.width()?setTimeout(function(){e.activate()},100):(e.mode=e.getOption("mode"),e.wrap(),e.addSpinner(),e.addControl(),e.addEvents())},wrap:function(){this.previewElement.addClass("gifplayer-ready"),this.wrapper=this.previewElement.wrap("<div class='gifplayer-wrapper'></div>").parent(),this.wrapper.css("width",this.previewElement.width()),this.wrapper.css("height",this.previewElement.height()),this.previewElement.css("cursor","pointer")},addSpinner:function(){this.spinnerElement=o("<div class = 'spinner'></div>"),this.wrapper.append(this.spinnerElement),this.spinnerElement.hide()},getOption:function(e){var t=this.previewElement.data(e.toLowerCase());return null!=t&&""!=t?t:this.options[e]},addControl:function(){var e=this.getOption("label");this.playElement=o("<ins class='play-gif'>"+e+"</ins>"),this.wrapper.append(this.playElement),this.playElement.css("top",this.previewElement.height()/2-this.playElement.height()/2),this.playElement.css("left",this.previewElement.width()/2-this.playElement.width()/2)},addEvents:function(){var t=this,e=this.getOption("playOn");switch(e){case"click":t.playElement.on("click",function(e){t.previewElement.trigger("click")}),t.previewElement.on("click",function(e){t.loadAnimation(),e.preventDefault(),e.stopPropagation()});break;case"hover":t.previewElement.on("click mouseover",function(e){t.loadAnimation(),e.preventDefault(),e.stopPropagation()});break;case"auto":console.log("auto not implemented yet");break;default:console.log(e+" is not accepted as playOn value.")}},processScope:function(){scope=this.getOption("scope"),scope&&(s.scopes[scope]&&s.scopes[scope].stopGif(),s.scopes[scope]=this)},loadAnimation:function(){this.processScope(),this.spinnerElement.show(),"gif"==this.mode?this.loadGif():"video"==this.mode&&(this.videoLoaded?this.playVideo():this.loadVideo()),this.getOption("onPlay").call(this.previewElement)},stopGif:function(){this.gifElement.hide(),this.previewElement.show(),this.playElement.show(),this.resetEvents(),this.getOption("onStop").call(this.previewElement)},getFile:function(e){var t=this.getOption(e);if(null!=t&&""!=t)return t;for(replaceString=this.previewElement.attr("src"),i=0;i<this.supportedFormats.length;i++)pattrn=new RegExp(this.supportedFormats[i]+"$","i"),replaceString=replaceString.replace(pattrn,e);return replaceString},loadGif:function(){var t=this;t.playElement.hide(),this.animationLoaded||this.enableAbort();var e=this.getFile("gif"),i=this.previewElement.width(),s=this.previewElement.height();this.gifElement=o("<img class='gp-gif-element' width='"+i+"' height=' "+s+" '/>"),this.getOption("wait")?this.gifElement.load(function(){t.animationLoaded=!0,t.resetEvents(),t.previewElement.hide(),t.wrapper.append(t.gifElement),t.spinnerElement.hide(),t.getOption("onLoadComplete").call(t.previewElement)}):(t.animationLoaded=!0,t.resetEvents(),t.previewElement.hide(),t.wrapper.append(t.gifElement),t.spinnerElement.hide()),this.gifElement.css("cursor","pointer"),this.gifElement.css("position","absolute"),this.gifElement.css("top","0"),this.gifElement.css("left","0"),this.gifElement.attr("src",e),this.gifElement.click(function(e){o(this).remove(),t.stopGif(),e.preventDefault(),e.stopPropagation()}),t.getOption("onLoad").call(t.previewElement)},loadVideo:function(){this.videoLoaded=!0;var e=this.getFile("mp4"),t=this.getFile("webm"),i=this.previewElement.width(),s=this.previewElement.height();this.videoElement=o('<video class="gp-video-element" width="'+i+'px" height="'+s+'" style="margin:0 auto;width:'+i+"px;height:"+s+'px;" autoplay="autoplay" loop="loop" muted="muted" poster="'+this.previewElement.attr("src")+'"><source type="video/mp4" src="'+e+'"><source type="video/webm" src="'+t+'"></video>');var a=this,n=function(){4===a.videoElement[0].readyState?(a.playVideo(),a.animationLoaded=!0):setTimeout(n,100)};this.getOption("wait")?n():this.playVideo(),this.videoElement.on("click",function(){a.videoPaused?a.resumeVideo():a.pauseVideo()})},playVideo:function(){this.spinnerElement.hide(),this.previewElement.hide(),this.playElement.hide(),this.gifLoaded=!0,this.previewElement.hide(),this.wrapper.append(this.videoElement),this.videoPaused=!1,this.videoElement[0].play(),this.getOption("onPlay").call(this.previewElement)},pauseVideo:function(){this.videoPaused=!0,this.videoElement[0].pause(),this.playElement.show(),this.mouseoverEnabled=!1,this.getOption("onStop").call(this.previewElement)},resumeVideo:function(){this.videoPaused=!1,this.videoElement[0].play(),this.playElement.hide(),this.getOption("onPlay").call(this.previewElement)},enableAbort:function(){var t=this;this.previewElement.click(function(e){t.abortLoading(e)}),this.spinnerElement.click(function(e){t.abortLoading(e)})},abortLoading:function(e){this.spinnerElement.hide(),this.playElement.show(),e.preventDefault(),e.stopPropagation(),this.gifElement.off("load").on("load",function(e){e.preventDefault(),e.stopPropagation()}),this.resetEvents(),this.getOption("onStop").call(this.previewElement)},resetEvents:function(){this.previewElement.off("click"),this.previewElement.off("mouseover"),this.playElement.off("click"),this.spinnerElement.off("click"),this.addEvents()}},o.fn.gifplayer=function(t){return/^(play|stop)$/i.test(t)?this.each(function(){if(t=t.toLowerCase(),o(this).hasClass("gifplayer-ready")){var e=new s(o(this),null);switch(e.options={},e.options=o.extend({},o.fn.gifplayer.defaults,e.options),e.wrapper=o(this).parent(),e.spinnerElement=e.wrapper.find(".spinner"),e.playElement=e.wrapper.find(".play-gif"),e.gifElement=e.wrapper.find(".gp-gif-element"),e.videoElement=e.wrapper.find(".gp-video-element"),e.mode=e.getOption("mode"),t){case"play":e.playElement.trigger("click");break;case"stop":e.playElement.is(":visible")||("gif"==e.mode?e.stopGif():"video"==e.mode&&e.videoElement.trigger("click"))}}}):this.each(function(){t=o.extend({},o.fn.gifplayer.defaults,t),new s(o(this),t).activate()})},o.fn.gifplayer.defaults={label:"GIF",playOn:"click",mode:"gif",gif:"",mp4:"",webm:"",wait:!1,scope:!1,onPlay:function(){},onStop:function(){},onLoad:function(){},onLoadComplete:function(){}}}(jQuery);